// @shared

export const case3TimerAutomation = {
  id: 3,
  category: 'Автоматизация GC',
  categoryClass: 'bg-emerald-400/20 text-emerald-400',
  gradientClass: 'bg-gradient-to-br from-emerald-400/20 to-green-500/20',
  icon: 'fas fa-clock',
  title: 'Автоматизация отображения таймера для карты привилегий',
  description: 'Динамическое отображение таймера и прогресс-бара с учетом сроков действия привилегий по полностью без ручного вмешательства.',
  fullDescription: 'В школе введена карта привилегий для участников, которая даёт право на бесплатные уроки, скидки и бонусы. При любой покупке ученик становится участником программы на 3 месяца. Для всех участников был создан отдельный тренинг с бесплатными уроками, расписанием мероприятий, сертификатами и другими бонусами. Необходимо было добавить таймер, который отсчитывает 91 день с момента покупки, и показывать ученику, сколько времени осталось до окончания действия карты привилегий.',
  result: '100%',
  resultLabel: 'Автоматизация',
  duration: '1 неделя',
  status: 'completed',
  filter: 'getcourse',
  mainTech: ['GetCourse', 'JavaScript', 'Timer'],
  allTech: ['GetCourse', 'JavaScript', 'Progress Bar', 'Dynamic Content', 'Date Logic'],
  results: [
    'Автоматизация расчёта времени до окончания действия карты привилегий',
    'Удобное отображение информации для ученика с визуализацией через прогресс-бар',
    'Минимизация ошибок за счёт автоматического расчёта времени и упрощения процесса отслеживания статуса карт привилегий',
    'Участники программы всегда могут видеть, сколько времени осталось до конца действия их карты привилегий'
  ],
  challenge: 'Задача казалась простой, когда продукт привязан к конкретной покупке. Однако в данном случае любой продукт в школе может дать доступ к привилегиям, а школа за 5 лет работы накопила около 1000 различных продуктов. Таким образом, не было конкретного продукта, к которому можно было бы привязать таймер. Для каждой покупки необходимо было вручную отслеживать дату и учитывать, когда заканчивается срок действия карты привилегий.',
  solution: 'Было создано дополнительное поле, куда записывается дата оплаты заказа. Разработан скрипт, который берет дату из этого поля и отсчитывает 90 дней с момента покупки, показывая оставшееся время до окончания действия карты привилегий. С помощью HTML и CSS был создан стильный таймер и шкала прогресс-бара, которая визуализирует оставшееся время.',
  code: `// Получаем дату из дополнительного поля
const purchaseDate = new Date(orderDate); // orderDate - дата покупки

// Определяем дату окончания привилегий (90 дней)
const expirationDate = new Date(purchaseDate);
expirationDate.setDate(purchaseDate.getDate() + 90); // Добавляем 90 дней

// Функция для обновления таймера
function updateTimer() {
    const now = new Date();
    const timeLeft = expirationDate - now; // Оставшееся время

    // Вычисляем дни, часы, минуты
    const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

    // Обновляем отображение таймера и прогресс-бара
    document.getElementById("timer").innerHTML = \`\${days}d \${hours}h \${minutes}m\`;
    const progress = (timeLeft / (90 * 24 * 60 * 60 * 1000)) * 100;
    document.getElementById("progress-bar").style.width = \`\${progress}%\`;
}

// Обновляем таймер каждую секунду
setInterval(updateTimer, 1000);`,
  conclusion: 'Теперь процесс стал гораздо удобнее и автоматизированным, что значительно улучшает работу школы и восприятие участниками программы.'
}