// @shared

export const case12OrderUpgradeSystem = {
  id: 12,
  category: 'Автоматизация GС',
  categoryClass: 'bg-violet-400/20 text-violet-400',
  gradientClass: 'bg-gradient-to-br from-violet-400/20 to-purple-500/20',
  icon: 'fas fa-chart-line',
  title: 'Система учета апгрейдов заказов с панелью отчетов',
  description: 'Полноценная система автоматического отслеживания апгрейдов заказов в GetCourse с интерактивной страницей отчетов для менеджеров. Включает учет изменений стоимости, управление доступами и визуализацию данных.',
  
  task: 'Создать автоматическую систему учета апгрейдов заказов в GetCourse, которая будет отслеживать изменение стоимости заказа между созданием и оплатой, а также предоставит менеджерам удобную страницу с отчетами и статистикой.',
  
  taskDetails: 'Школа хотела отслеживать, насколько вырастает средний чек благодаря допродажам и апгрейдам во время вебинаров. Требовалась не только автоматизация расчета разницы в стоимости, но и удобная панель для менеджеров с фильтрами, статистикой и возможностью выгрузки данных.',
  
  systemComponents: {
    tracking: {
      title: 'Автоматическое отслеживание',
      features: [
        'Фиксация начальной стоимости при создании заказа',
        'Фиксация финальной стоимости при оплате',
        'Автоматический расчет апгрейда (разница между финальной и начальной стоимостью)',
        'Автоматическая пометка тегом "апгрейд со входа"',
        'Запись значения апгрейда в дополнительное поле заказа'
      ]
    },
    reportPage: {
      title: 'Интерактивная страница отчетов',
      features: [
        'Таблица всех заказов с апгрейдами',
        'Фильтры по дате, менеджеру, статусу',
        'Визуализация статистики (общий апгрейд, средний чек)',
        'Возможность экспорта данных',
        'Адаптивный дизайн для мобильных устройств'
      ]
    },
    accessControl: {
      title: 'Управление доступами',
      features: [
        'Автоматическое добавление менеджера при добавлении в группу "Стажировка"',
        'Автоматическое удаление менеджера при удалении из группы',
        'Хранение списка менеджеров в таблице GetCourse',
        'Ограничение доступа только для авторизованных менеджеров'
      ]
    },
    automation: {
      title: 'Дополнительная автоматизация',
      features: [
        'Удаление заказов по определенному статусу',
        'Защита от несанкционированного редактирования',
        'Боковое меню с иконкой для быстрого доступа',
        'Webhook-интеграции для обработки событий'
      ]
    }
  },
  
  implementation: [
    'Создано дополнительное поле заказа "Апгрейд заказа" (тип: строка)',
    'Разработана воронка с тремя триггерами: "Заказ создан", "Заказ оплачен", "Добавлен/Удален из группы"',
    'Реализован скрипт changeDealInformation.tsx для отслеживания изменения стоимости',
    'Создана таблица для хранения списка менеджеров (tableManagerName.tsx)',
    'Разработаны скрипты для управления доступами (addManager.tsx, deleteManager.tsx)',
    'Создана интерактивная страница отчетов на React (page.tsx) с таблицей данных (table.tsx)',
    'Добавлен функционал удаления заказов по статусу (deleteDealByStatusHook.tsx)',
    'Настроена блокировка несанкционированного редактирования через код в Body',
    'Создана подробная видео-инструкция по настройке системы для клиента'
  ],
  
  technologies: [
    'GetCourse IDE',
    'GetCourse REST API',
    'React + TypeScript',
    'GetCourse Tables',
    'GetCourse Webhooks',
    'Custom Fields API',
    'Воронки GetCourse',
    'JavaScript/TypeScript'
  ],
  
  workflowSteps: [
    {
      step: 1,
      title: 'Создание заказа',
      description: 'Пользователь создает заказ → Воронка фиксирует начальную стоимость в переменной deal.startCost'
    },
    {
      step: 2,
      title: 'Оплата заказа',
      description: 'Пользователь оплачивает заказ → Воронка фиксирует финальную стоимость в переменной deal.finishCost'
    },
    {
      step: 3,
      title: 'Расчет апгрейда',
      description: 'Система проверяет условие (finishCost > startCost) → Если да, рассчитывает апгрейд = finishCost - startCost'
    },
    {
      step: 4,
      title: 'Обновление данных',
      description: 'Система обновляет поле "Апгрейд заказа" и добавляет тег "апгрейд со входа"'
    },
    {
      step: 5,
      title: 'Отображение в отчетах',
      description: 'Данные автоматически появляются на странице отчетов для менеджеров'
    }
  ],
  
  codeExample: {
    filename: 'changeDealInformation.tsx',
    description: 'Основной скрипт отслеживания изменения стоимости заказа',
    code: `// Получаем информацию о заказе
const dealInfo = await DealsTable.findOne(ctx, {
  id: req.body.deal.id
});

// Получаем начальную и финальную стоимость
const startCost = req.body.deal.startCost;
const finishCost = req.body.deal.finishCost;

// Если финальная стоимость больше начальной
if (Number(finishCost) > Number(startCost)) {
  // Рассчитываем апгрейд
  const upgrade = Number(finishCost) - Number(startCost);
  
  return {
    success: true,
    upgrade: upgrade
  };
}

return { success: false };`
  },
  
  projectUrl: 'https://janegur.github.io/upgrade-orders/',
  
  screenshots: [
    {
      url: 'https://janegur.github.io/upgrade-orders/static/media/screenshot-1.png',
      caption: 'Главная страница инструкции с пошаговым руководством'
    },
    {
      url: 'https://janegur.github.io/upgrade-orders/static/media/screenshot-2.png',
      caption: 'Пример страницы отчетов с таблицей апгрейдов'
    }
  ],
  
  results: [
    '✅ Полная автоматизация учета апгрейдов без участия команды',
    '✅ Экономия 5-10 часов работы менеджеров в неделю на ручной подсчет',
    '✅ Точная статистика по эффективности допродаж и апгрейдов',
    '✅ Удобная страница отчетов с фильтрами и экспортом данных',
    '✅ Автоматическое управление доступами для менеджеров',
    '✅ Возможность отслеживать ROI вебинаров и воронок в реальном времени',
    '✅ Система полностью документирована и легко масштабируется'
  ],
  
  clientValue: [
    'Видимость эффективности продаж: школа видит, сколько приносят апгрейды',
    'Мотивация команды: менеджеры видят свою результативность в реальном времени',
    'Оптимизация воронок: данные помогают понять, где лучше всего работают допродажи',
    'Масштабируемость: система легко адаптируется под новые продукты и воронки'
  ],
  
  conclusion: 'Проект демонстрирует комплексный подход к автоматизации бизнес-процессов в GetCourse: от отслеживания данных до визуализации и управления доступами. Система полностью автоматизирована, имеет подробную документацию и готова к масштабированию на любые другие процессы школы.',
  
  specialFeatures: [
    'Подробная видео-инструкция для самостоятельной настройки',
    'Интерактивная документация с примерами кода',
    'Модульная архитектура для легкого расширения функционала',
    'Защита от несанкционированного доступа',
    'Адаптивный дизайн страницы отчетов'
  ],
  
  result: '100%',
  resultLabel: 'Автоматизация',
  duration: '2 недели',
  status: 'completed',
  filter: 'getcourse',
  mainTech: ['GetCourse', 'React', 'TypeScript'],
  allTech: [
    'GetCourse IDE',
    'GetCourse API',
    'React',
    'TypeScript',
    'Tables',
    'Webhooks',
    'Custom Fields',
    'Воронки'
  ]
}

